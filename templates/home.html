{% extends "base.html" %}
{% block style %}
    table {
        border: 1px solid #333;
    }
{% endblock %}
{% block title %}LiteWatch{% endblock %}

{% block allmenuitems %}
    {% if user.is_authenticated %}
        <a href="instructionpage">Instruction</a>

    {%  else %}
        <a>Dasit</a>
    {%  endif %}
{%  endblock %}

{% block content %}
    <h1>This is a user's internal homepage</h1>
    <p><form action="newsearch"><button type="submit">Create New Search</button></form></p>
    {{ testText }}
    <div>
    <table>
        <tr>
            <th>Keyword</th>
            <th>URL</th>
            <th>Date Created</th>
            <th># of Results</th>
            <th>Result IDs</th>
            <th>Status</th>
        </tr>
        {% for res in userResultList %}
            <tr>
                <td>{{ res.keyword }}</td>
                <td>{{ res.url }}</td>
                <td>{{ res.dateCreated }}</td>
                <td>{{ res.hits }}</td>
                <td>{{ res.hitIds }}</td>
                <td>
                    <form action="/" method="POST">
                        {% csrf_token %}
                        <input type="hidden" name="changestate" value="{{ res.id }}">
                        <button type="submit">{{ res.state }}</button>
                    </form>
                </td>
                <td>
                    <form action="/" method="POST">
                        {% csrf_token %}
                        <input type="hidden" name="deletesearch" value="{{ res.id }}">
                        <button type="submit" onclick="return confirm('Are you sure?\nDeleting will remove this search and associated results forever.')">Delete</button>
                    </form>
                </td>
            </tr>
        {% endfor %}
    </table>
    </div>

{% endblock %}
